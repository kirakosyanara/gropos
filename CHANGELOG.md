# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [0.9.0] - 2026-01-01 - Feature Complete Alpha

**ðŸŽ‰ All P0 Critical Features Complete!**

This release marks the feature-complete alpha milestone for GroPOS. All core POS functionality is implemented and ready for testing.

### P0 Critical Features Summary

1. **Lock Screen & Inactivity Timer (P0 #1)** - Session security with auto-lock after 5 minutes of inactivity
2. **Manager Approval Flow (P0 #2)** - RBAC infrastructure with permission checking and approval dialogs
3. **Checkout Modification Mode (P0 #3)** - Line item editing, quantity changes, and void operations
4. **Employee List + Till Assignment (P0 #4)** - Complete login flow with state machine, employee grid, and till selection
5. **Returns Processing (P0 #5)** - Return item screen with refund calculations and manager approval

---

## [Unreleased]

### Added
- **Void Transaction (P1 #3)**: Full transaction void functionality
  - **UI Component (`VoidConfirmationDialog.kt`):**
    - Confirmation dialog with warning icon
    - "No, Keep It" (cancel) and "Yes, Void It" (danger/red) buttons
    - Prevents accidental transaction voids
  - **State Management:**
    - Added `showVoidConfirmationDialog` to `CheckoutUiState`
    - Added `VoidTransactionRequest`, `ConfirmVoidTransaction`, `CancelVoidTransaction` events
  - **Logic (`CheckoutViewModel`):**
    - `onVoidTransactionRequest()`: Checks permission before showing dialog
    - Permission check: GRANTED/SELF_APPROVAL -> show confirmation
    - REQUIRES_APPROVAL -> show manager approval first
    - DENIED -> show error message
    - Audit logging to console on void completion
    - State reset: clears modification mode if active
  - **Functions Grid:**
    - Added "Void" button (Danger style) to FunctionsGrid
    - Quick access alongside Lookup, Recall, Functions buttons
  - **Governance:**
    - Double confirmation flow (permission check + dialog)
    - Audit trail logged to console
    - Cart cleared only after confirmation

- **Returns Processing (P0 #5)**: Return Item Screen and refund logic
  - **Domain Models (`features/returns/domain/model/ReturnModels.kt`):**
    - `ReturnReason` enum: DEFECTIVE, WRONG_ITEM, CHANGED_MIND, QUALITY, OTHER
    - `ReturnableItem`: Original transaction items with remaining quantity
    - `ReturnItem`: Items selected for return with quantity and reason
    - `ReturnCart`: Collection of return items with refund totals
  - **Domain Service (`features/returns/domain/service/ReturnService.kt`):**
    - `getReturnableItems(transactionId)`: Fetches returnable items from transaction
    - `validateReturnQuantity()`: Ensures return qty <= remaining qty
    - `createReturnItem()` and `createReturnCart()`: Factory methods
    - `validateReturnCart()`: Cart validation before processing
  - **Presentation (`features/returns/presentation/`):**
    - `ReturnUiState`: State for returnable items, return cart, dialogs
    - `ReturnViewModel`: Manages return flow, quantity dialog, manager approval
    - `ReturnScreen`: Voyager Screen with transactionId parameter
    - `ReturnContent`: 70/30 split layout per SCREEN_LAYOUTS.md
      - Left panel: Returnable items grid with "Add to Return" buttons
      - Right panel: Return cart, refund totals, "Process Return" button
    - Quantity dialog with TenKey for selecting return quantity
    - Simple manager approval dialog (P0 stub)
  - **Navigation Wiring:**
    - Added "Return Items" button to TransactionHistoryScreen detail view
    - Button navigates to ReturnScreen with selected transaction ID
  - **DI (`core/di/ReturnsModule.kt`):**
    - ReturnService as singleton
    - ReturnViewModel as factory
- **Employee List + Till Assignment (P0 #4)**: Login V2 with state machine flow
  - **Domain Models (`features/cashier/domain/model/`):**
    - `Till`: Cash drawer model with availability tracking
    - `CashierSession`: Session tracking with shift metrics
    - `Employee`: Enhanced employee model for login grid
  - **Repositories (`features/cashier/domain/repository/` & `data/`):**
    - `TillRepository` interface with `getTills()`, `assignTill()`, `releaseTill()`
    - `EmployeeRepository` interface with `getEmployees()`, `verifyPin()`, `getApprovers()`
    - `FakeTillRepository`: In-memory till management
    - `FakeEmployeeRepository`: Test employees matching FakeAuthRepository
  - **Refactored Login Flow (per CASHIER_OPERATIONS.md):**
    - `LoginUiState`: Now a data class with `LoginStage` enum (LOADING, EMPLOYEE_SELECT, PIN_ENTRY, TILL_ASSIGNMENT, SUCCESS)
    - `LoginViewModel`: State machine with employee selection, PIN verification, till assignment
    - `LoginContent`: Multi-stage UI with employee grid, PIN entry, and till dialog
    - `LoginScreen`: Navigation on SUCCESS stage
  - **UI Components:**
    - `TillSelectionDialog`: Per DIALOGS.md spec with table layout
    - Employee cards with avatar initials, name, and role
    - PIN dot display and TenKey integration
    - Back button navigation between stages
  - **DI Updates (`core/di/AuthModule.kt`):**
    - Added `EmployeeRepository` and `TillRepository` bindings
    - Updated `LoginViewModel` to use new repositories
  - **Tests (`LoginViewModelTest.kt`):**
    - Full state machine test coverage
    - Tests for employee selection, PIN entry, till assignment
    - Tests for error handling and back navigation
- **Manager Approval Flow (P0 #2)**: RBAC infrastructure for sensitive actions
  - Created `core/security/PermissionModels.kt` with:
    - `PermissionCheckResult` enum: GRANTED, REQUIRES_APPROVAL, SELF_APPROVAL_ALLOWED, DENIED
    - `RequestAction` enum: Maps actions to permission base strings per ROLES_AND_PERMISSIONS.md
    - `ApprovalResult` sealed class: Approved, Denied, Error
    - `ApprovalAuditEntry` data class for audit logging
    - `ApprovalState` sealed class: Flow state machine (Idle -> SelectManager -> EnterPin -> Approved/Denied)
    - `ManagerInfo` data class for manager list display
  - Created `core/security/PermissionManager` singleton:
    - `checkPermission(user, action)`: Checks direct permission, then .Request, then .Self Approval
    - `checkRoleDefaults()`: Role-based fallbacks for Admin/Manager/Supervisor/Cashier
    - `canApproveForOthers()`: Check if user can approve requests
    - `getRoleLevel()` and `hasMinimumRole()`: Role hierarchy utilities
  - Created `core/security/ManagerApprovalService`:
    - `getApprovers(action, currentUser)`: Returns managers who can approve, excludes self if no self-approval
    - `validateApproval()`: Validates manager PIN and logs to audit trail
    - `generateApprovalCode()`: Format APR-YYYYMMDD-XXXX
    - Console audit log output for verification (no PIN in logs per governance)
    - Walking skeleton: Manager "9999" uses PIN "1234", Manager "9998" uses PIN "5678"
  - Created `core/components/dialogs/ManagerApprovalDialog.kt`:
    - Two-step flow per DIALOGS.md: Select Manager -> Enter PIN
    - Green header (#04571B) per UI_DESIGN_SYSTEM.md
    - Manager list with avatar, name, job title
    - TenKey integration for PIN entry
    - PIN dot display (4-6 digits)
    - Error message display for invalid PIN
    - Back/Cancel/Approve buttons
  - Updated `AuthUser` model with:
    - `permissions: List<String>`: Permission strings per ROLES_AND_PERMISSIONS.md
    - `isManager: Boolean`: Can approve requests for others
    - `jobTitle: String?`: Display in approval dialog
    - `imageUrl: String?`: Avatar URL
  - Updated `FakeAuthRepository` with permission-aware users:
    - Admin: Full direct permissions
    - Manager (ID 9999): .Self Approval permissions
    - Supervisor (ID 9998): Mixed .Request and .Self Approval
    - Cashier: .Request permissions only
  - Updated `CheckoutViewModel`:
    - `onVoidSelectedLineItem()` now checks permissions before voiding
    - Shows `ManagerApprovalDialog` if REQUIRES_APPROVAL
    - `onSubmitManagerApproval()`: Validates PIN and executes pending action
    - `executeApprovedAction()`: Executes voiding after approval
  - Updated `CheckoutUiState` with `ManagerApprovalDialogState`
  - Updated `CheckoutScreen` with manager approval events
  - Updated `CheckoutContent` to render `ManagerApprovalDialog`
  - Updated `CheckoutModule` with `ManagerApprovalService` singleton
- **Lock Screen & Inactivity Timer (P0 #1)**: Security feature for automatic session lock
  - Created `LockScreen.kt` (Voyager Screen) with dark gradient theme per SCREEN_LAYOUTS.md
    - Left panel: Station name, large real-time clock, date, lock status, version footer
    - Right panel: Employee info card, PIN entry display, TenKey pad, Verify/Sign Out buttons
  - Created `LockContent.kt` composable with visual specs per CASHIER_OPERATIONS.md
    - Lock status indicator (LOCKED text with lock icon)
    - Lock type display: "Session timed out" / "Manually locked" / "Locked by manager"
    - PIN dot display (8 dots max, filled based on input)
    - Error message display for invalid PIN
  - Created `LockViewModel.kt` with session logic
    - Real-time clock using `kotlinx-datetime` (updates every second)
    - PIN input management (max 8 digits)
    - Walking skeleton: Accepts "1234" as valid PIN (TODO: API verification)
    - `UnlockResult` and `SignOutResult` sealed interfaces for navigation
  - Created `LockUiState.kt` data class with state properties
    - `LockType` enum: AutoLocked, Locked, ManagerLocked
    - Station name, employee info, PIN input, verification status
  - Created `InactivityManager` singleton in `core/session/`
    - Tracks last user interaction time
    - Configurable timeout (default: 5 minutes per CASHIER_OPERATIONS.md)
    - Emits `LockEvent` via SharedFlow when timeout triggers
    - `recordActivity()` called on any user interaction to reset timer
    - `manualLock()` for F4 key shortcut
    - Screen exemption list (LockScreen, LoginScreen, CustomerDisplay)
  - Updated `App.kt` with inactivity detection
    - Box wrapper with `pointerInput` to detect taps/clicks
    - `onPreviewKeyEvent` to detect keyboard input
    - F4 key triggers manual lock per CASHIER_OPERATIONS.md
    - Listens to `InactivityManager.lockEvent` and navigates to LockScreen
  - Updated `LoginScreen.kt` to start InactivityManager after successful login
  - Updated `AuthModule.kt` to provide `LockViewModel`
  - Lock types map to `DeviceEventType` per spec (AutoLocked, Locked, ManagerLocked)
- **Checkout Modification Mode**: Line item modification panel (per SCREEN_LAYOUTS.md)
  - Clicking a line item enters modification mode (right panel transforms)
  - Selected item highlighted with green border and background
  - Mode buttons: QUANTITY (change qty 1-99), DISCOUNT (%), PRICE (override)
  - Weighted items start in DISCOUNT mode (quantity disabled)
  - TenKey with mode-specific input display (prefix/suffix based on mode)
  - REMOVE ITEM button to void selected line (marks as isRemoved)
  - BACK button exits modification mode
  - Updated `CheckoutUiState` with `selectedItemId`, `selectedItem`, `modificationTenKeyMode`, `modificationInputValue`
  - Added `isModificationMode` computed property for panel swap logic
  - Created `ModificationPanel` composable with full modification UI
  - Created `ModeButton` component for mode selection
  - Created `SelectedItemUiModel` for modification panel display
  - Added `ModificationTenKeyMode` enum (QUANTITY, DISCOUNT, PRICE)
  - Added 8 new modification events to `CheckoutEvent` sealed interface
  - Added modification handlers to `CheckoutViewModel`
  - Integrated `CartRepository.updateQuantity()` for quantity changes
  - Integrated `CartRepository.voidItem()` for remove item action
- **Transaction History Screen (Recall)**: View and browse completed transactions
  - Created `TransactionHistoryScreen.kt` (Voyager Screen) for transaction history
    - Per FUNCTIONS_MENU.md: Return/Invoice functionality
    - Per SCREEN_LAYOUTS.md: Order Report Screen layout
  - Created `TransactionHistoryContent.kt` with 40/60 split layout
    - Left pane: Scrollable transaction list (ID, time, total, payment method)
    - Right pane: Detailed transaction view (items, totals, payments)
    - Empty state with "No Recent Transactions" message
  - Created `TransactionHistoryViewModel` with data loading
    - Loads recent transactions via `TransactionRepository.getRecent()`
    - Auto-selects first transaction on load
    - Date formatting (ISO-8601 to "Jan 01, 2:30 PM")
  - Created `TransactionHistoryUiState` with UI models
    - `TransactionListItemUiModel` for list display
    - `TransactionDetailUiModel` for detail view
  - Created `TransactionModule` for Koin DI
  - Wired "Recall" button in `FunctionsGrid` to navigate to history screen
  - Added `NavigateToRecall` event to `CheckoutEvent` sealed interface
- **Transaction Persistence**: Completed transactions are now saved to CouchbaseLite database
  - Created `Transaction`, `TransactionItem`, `TransactionPayment` domain models (per DATABASE_SCHEMA.md)
    - Transaction document structure aligns with LocalTransaction collection schema
    - Supports all monetary fields with BigDecimal precision
    - Includes items array and payments array per schema
  - Created `Cart.toTransaction()` mapper function
    - Converts Cart and AppliedPayments to finalized Transaction
    - Generates unique UUID for transaction ID and guid
    - Captures timestamps in ISO-8601 format
  - Created `TransactionRepository` interface with `saveTransaction()`, `getById()`, `getRecent()`, `getPending()` methods
  - Created `CouchbaseTransactionRepository` for Desktop and Android
    - Collection: `LocalTransaction` in `local` scope (per DATABASE_SCHEMA.md)
    - Creates index on `completedDateTime` for history queries
    - Full document serialization with items and payments arrays
    - Error handling: Returns Result.failure instead of crashing
  - Updated `PaymentViewModel` to save transaction on payment completion
    - Injects `TransactionRepository` dependency
    - Converts cart to transaction when balance reaches zero
    - Only clears cart after successful save
  - Implemented virtual receipt printer (console output)
    - Simulates physical receipt printer output
    - Shows all items, quantities, prices, taxes, CRV
    - Shows payment methods and change
    - ASCII-formatted receipt for easy debugging
  - Updated `DatabaseModule` (Desktop/Android) to provide `CouchbaseTransactionRepository`
  - Updated `PaymentModule` to inject `TransactionRepository` into `PaymentViewModel`
- **Offline-First Persistence (CouchbaseLite)**: Replaced in-memory fakes with persistent database
  - Created `expect/actual DatabaseProvider` for multiplatform database initialization
    - Desktop: Uses CouchbaseLite Java SDK, stores in user.dir
    - Android: Uses CouchbaseLite Android SDK, stores in context.filesDir
  - Created `CouchbaseProductRepository` implementing `ProductRepository`
    - Query by barcode: Uses ArrayExpression on `itemNumbers` array (per DATABASE_SCHEMA.md)
    - Query by category: Uses Expression.property with ordering
    - Search products: LIKE operator on productName
    - Full document mapping to `Product` entity with taxes, CRV, itemNumbers
  - Created `DebugDataSeeder` for first-launch data population
    - Checks if Product collection is empty
    - Seeds all 10 test products (Milk, Apple, Cola, Chips, etc.)
    - Called immediately after Koin initialization
  - Created `InitialProducts` object with shared seed data
  - Created platform-specific `DatabaseModule` for Koin DI
    - Provides DatabaseProvider as singleton
    - Provides CouchbaseProductRepository bound to ProductRepository interface
    - Provides DebugDataSeeder
  - Updated `Main.kt` (Desktop) to initialize database module and seed on startup
  - Updated `MainActivity.kt` (Android) to initialize database module and seed on startup
  - Removed `FakeProductRepository` from production DI (still available for tests)
- **Advanced Calculation Engine**: Production-grade tax, CRV, and discount calculations
  - Created `TaxCalculator` service (per TAX_CALCULATIONS.md, SERVICES.md)
    - Tax Consistency Rule: Tax per unit rounded BEFORE multiplying by quantity
    - SNAP-eligible items are tax-exempt (returns zero tax)
    - CRV is ALWAYS included in taxable amount (California law)
  - Created `CRVCalculator` service (per DEPOSITS_FEES.md, SERVICES.md)
    - California Redemption Value calculation per product
    - Supports $0.05 (<24oz) and $0.10 (>=24oz) CRV rates
    - CRV is tracked separately but included in grand total
  - Created `DiscountCalculator` service (per SERVICES.md)
    - Price hierarchy: Prompted â†’ Customer â†’ Sale â†’ Bulk â†’ Retail
    - Percentage and fixed amount discount support
    - Floor price enforcement with manager override option
    - Savings calculation per unit and total
  - Updated `FakeProductRepository` with comprehensive test products:
    - Cola 2-Liter: Taxable (9.5%) with CRV ($0.10)
    - Cola Can 12oz: Taxable (9.5%) with CRV ($0.05)
    - Bottled Water: SNAP-eligible (no tax) with CRV ($0.05)
    - Potato Chips: SNAP-eligible (no tax), no CRV
    - Hot Dog: Taxable (9.5%), not SNAP-eligible, no CRV
  - Added `snapEligibleTotal` property to `Cart` for payment screen SNAP tracking
  - Registered all calculators as singletons in Koin `checkoutModule`
- **Payment Screen**: Full payment flow with split tender support (per SCREEN_LAYOUTS.md)
  - Created `PayScreen.kt` and `PayContent.kt` with horizontal split layout
  - Left panel: Transaction summary, SNAP eligible total, payments applied, remaining amount
  - Right panel: Payment method tabs (Cash, Charge, EBT, Other), TenKey
  - Created `PaymentViewModel` observing shared `CartRepository` singleton
  - SNAP eligibility displayed separately from non-SNAP totals (per PAYMENT_PROCESSING.md)
  - Cash payments: Quick amounts ($1-$100), exact change, entered amount
  - Split tender: Multiple payments tracked and displayed
  - Change dialog shown when cash overpaid
  - Card/EBT payments show placeholder message (terminal not connected)
  - Navigation from Checkout "Pay" button to Payment screen
  - Created `PaymentModule.kt` for Koin DI
  - Domain models: `PaymentType`, `PaymentStatus`, `PaymentResponse`, `AppliedPayment`
- **Product Lookup Dialog**: Full product search/browse dialog (per SCREEN_LAYOUTS.md)
  - Created `ProductLookupDialog.kt` with categories sidebar and products grid
  - Extended `ProductRepository` with `searchProducts(query)` and `getCategories()` methods
  - Updated `FakeProductRepository` to support combined search (name + barcode)
  - Added lookup state management to `CheckoutUiState` and `CheckoutViewModel`
  - Integrated with checkout screen via "Lookup" button in Functions Grid
  - Auto-focus search field on dialog open
  - SNAP eligibility badge on product cards
  - Category filtering and "All Products" view
  - Product selection adds item to cart and closes dialog
- **Multi-Window State Synchronization**: Implemented true cross-window cart state sharing
  - Created `CartRepository` interface in domain layer (Single Source of Truth pattern)
  - Created `CartRepositoryImpl` as singleton for shared cart state across windows
  - Created `CustomerDisplayViewModel` to observe shared cart state
  - Refactored `ScanItemUseCase` to use CartRepository instead of internal state
  - Refactored `CheckoutViewModel` to observe CartRepository (not own state)
  - Updated Koin module: `CartRepository` as `single {}` for true singleton
  - Updated `CustomerDisplayScreen` with Voyager Screen wrapper
  - Removed placeholder `SharedAppState` object in favor of proper DI
- UI/UX Design System: `Color.kt` with GroPOS color palette per UI_DESIGN_SYSTEM.md
- UI/UX Design System: `Typography.kt` with Archivo-based typography scale
- UI/UX Design System: `Spacing.kt` with GroPOSSpacing and GroPOSRadius values
- Core components: `Buttons.kt` with SuccessButton, PrimaryButton, DangerButton, WarningButton, OutlineButton, BackButton
- Core components: `Containers.kt` with LeftBlock, RightBlock, WhiteBox, GreenBox, CardBox
- Core components: `TenKey.kt` numeric keypad component with TenKeyMode states
- Core components: `FormFields.kt` with SearchField, QuantityField, PasswordField, BarcodeInputField
- Core components: `FunctionsPanel.kt` with FunctionsGrid and tabbed FunctionsPanel
- Customer Display: `CustomerDisplayScreen.kt` for secondary monitor (per SCREEN_LAYOUTS.md)
- Multi-window support: `Main.kt` updated to detect multiple monitors and launch Customer Display
- Dev Mode: `DEV_FORCE_CUSTOMER_DISPLAY` flag to test dual-window on single monitor
- `SharedAppState` object for cross-window state sharing (placeholder for DI integration)
- Initial Kotlin Multiplatform project scaffolding
- Gradle version catalog (`libs.versions.toml`) with all core dependencies
- Root `build.gradle.kts` and `settings.gradle.kts` configuration
- Module structure: `shared/`, `desktopApp/`, `androidApp/`
- Shared module configured for commonMain, desktopMain, androidMain source sets
- CouchbaseLite database dependency configured for offline-first architecture
- ProGuard rules for Android release builds
- Comprehensive `.gitignore` for KMP projects
- Auth feature domain layer: `AuthUser`, `UserRole`, `AuthError` models
- Auth feature domain layer: `AuthRepository` interface
- Auth feature domain layer: `ValidateLoginUseCase` with PIN validation (4-digit rule)
- Auth feature data layer: `FakeAuthRepository` with simulated 500ms network delay
- Unit tests for `ValidateLoginUseCase` (7 test cases, TDD approach)
- `gradle.properties` with AndroidX and KMP configuration
- Auth feature presentation layer: `LoginUiState` sealed interface (Idle, Loading, Success, Error)
- Auth feature presentation layer: `LoginViewModel` using Voyager ScreenModel
- Auth feature presentation layer: `LoginScreen` with Voyager navigation
- Auth feature presentation layer: `LoginContent` composable with hoisted state
- Auth feature presentation layer: Preview functions for all UI states
- Koin dependency injection: `AuthModule` providing repository, use case, and viewmodel
- Koin dependency injection: `AppModule` aggregating all feature modules
- Integration tests for `LoginViewModel` (6 test cases)
- Checkout feature domain models: `Product`, `CartItem`, `Cart` with BigDecimal precision
- Checkout feature domain model: `ItemNumber`, `ProductTax`, `ProductSale` supporting types
- Checkout feature domain model: `Cart.addProduct()` with quantity increment by branchProductId
- Checkout feature hardware abstraction: `ScannerRepository` interface with `Flow<String>`
- Checkout feature data interface: `ProductRepository` with `getByBarcode()` method (per DATABASE_SCHEMA.md)
- Checkout feature business logic: `ScanItemUseCase` reactive scanning with cart management
- Checkout feature data layer: `FakeProductRepository` with schema-compliant sample data
- Checkout feature data layer: `FakeScannerRepository` with `emitScan()` for testing
- Unit tests for `ScanItemUseCase` (12 test cases including schema compliance tests)
- Core utility: `CurrencyFormatter` interface with `UsdCurrencyFormatter` implementation
- Checkout feature presentation layer: `CheckoutUiState` with `CheckoutItemUiModel`, `CheckoutTotalsUiModel`
- Checkout feature presentation layer: `CheckoutViewModel` with reactive scanner flow collection
- Checkout feature presentation layer: `CheckoutScreen` (Voyager) with standard POS layout
- Checkout feature presentation layer: `CheckoutContent` composable with LazyColumn and totals panel
- Checkout feature UI: SNAP eligibility badge displayed for `isSnapEligible` items
- Checkout feature UI: Scan feedback snackbar for ProductAdded/NotFound events
- Checkout feature UI: Empty cart state with placeholder
- Checkout feature UI: Preview functions for all screen states (5 previews)
- Koin dependency injection: `CheckoutModule` providing all checkout feature dependencies
- Unit tests for `CheckoutViewModel` (14 test cases)
- Core theme: `GroPOSTheme` Material3 theme with professional POS color palette
- Navigation: Root `App.kt` with Voyager Navigator and GroPOSTheme wrapper
- Navigation: `LoginScreen` â†’ `CheckoutScreen` transition on successful login
- Navigation: TopAppBar with logout button on `CheckoutScreen`
- Navigation: `CheckoutEvent.Logout` event for logout action
- Desktop entry point: `Main.kt` with Koin initialization and 1280x800 window
- Android entry point: `MainActivity.kt` with Koin initialization and edge-to-edge display
- Android manifest with network, camera, and Bluetooth permissions
- Android resources: strings.xml, themes.xml for app configuration

### Changed
- **BREAKING**: `CartItem.taxPerUnit` calculation now includes CRV in taxable amount (per TAX_CALCULATIONS.md)
  - Previous: `taxableAmount = effectivePrice - discountAmountPerUnit`
  - New: `taxableAmount = (effectivePrice - discounts) + CRV`
  - SNAP-eligible items now return $0.00 tax (tax exemption rule)
- **UI/UX Overhaul**: Refactored entire UI layer to match new UI/UX Source of Truth (docs/development-plan/ui-ux/)
- Refactored `GroPOSTheme.kt` to use GroPOS color palette from UI_DESIGN_SYSTEM.md
  - Primary: PrimaryGreen (#04571B) for success actions
  - Secondary: PrimaryBlue (#2073BE) for alternative actions
  - Error: DangerRed (#FA1B1B) for danger states
  - Backgrounds: LightGray1, LightGray2 for panel sections
- Refactored `CheckoutContent.kt` with 70/30 split layout per SCREEN_LAYOUTS.md
  - LEFT (70%): Order list with info bar and barcode input
  - RIGHT (30%): Totals card, Ten-Key pad, Functions Grid, Pay button
  - Added Order List Item component with 10/10/60/5/15 column weights
  - Moved logout button to left panel header
- Refactored `LoginContent.kt` with 50/50 split layout per SCREEN_LAYOUTS.md
  - LEFT: Branding section with station name, logo, time display
  - RIGHT: Authentication with PIN dot display, Ten-Key pad, Sign In button
- Replaced generic Material3 buttons with custom GroPOS button components
- Renamed application from "GrowPOS" to "GroPOS" across all documentation files (39 occurrences in 8 files)
- Modernized "Food Stamp" terminology to "SNAP" across entire codebase
  - Documentation: Updated DATABASE_SCHEMA.md, ARCHITECTURE_BLUEPRINT.md, TEST_SCENARIOS.md, ANDROID_HARDWARE_GUIDE.md
  - Code: Renamed `isFoodStampEligible` to `isSnapEligible` in Product, CartItem models
  - Hardware: Renamed `processEbtFoodStamp()` to `processEbtSnap()`, `EBT_FOODSTAMP` to `EBT_SNAP`

### Refactored
- **BREAKING**: Refactored `Product` model to align with DATABASE_SCHEMA.md
  - Changed `id` to `branchProductId` (Int)
  - Changed `name` to `productName`
  - Changed `price` to `retailPrice`
  - Changed `sku` to `itemNumbers: List<ItemNumber>` (supports multiple barcodes)
  - Added schema-required fields: category, department, taxes, currentSale, etc.
- **BREAKING**: Refactored `CartItem` to align with TransactionItem schema
  - Changed `quantity` to `quantityUsed`
  - Added `priceUsed`, `taxPerUnit`, `taxTotal`, `crvRatePerUnit` fields
  - Added computed properties matching schema: subTotal, savingsTotal, lineTotal
- **BREAKING**: Refactored `ProductRepository` interface
  - Renamed `findBySku()` to `getByBarcode()` per schema specification
  - Added `getByCategory(categoryId: Int)` method
  - Changed return types to nullable (null instead of Result.failure)
- Updated `FakeProductRepository` to use schema example data (Milk: branchProductId=12345)